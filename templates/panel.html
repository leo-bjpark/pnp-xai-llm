<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Panel — PnP-XAI-LLM</title>
  <script>document.documentElement.dataset.theme=localStorage.getItem('pnp-xai-theme')||'light';</script>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/ide.css') }}" />
  <style>
    body { margin: 0; min-height: 100vh; display: flex; flex-direction: column; }
    .panel-window { flex: 1; display: flex; flex-direction: column; min-height: 0; }
    .panel-window .right-panel { position: static; transform: none; width: 100%; height: 100%; box-shadow: none; border: none; }
    .panel-window .right-panel-body { flex: 1; }
  </style>
</head>
<body>
  <div class="panel-window">
    <aside class="right-panel visible" aria-label="Right panel" id="treatment-panel">
      <div class="right-panel-header">
        <span class="right-panel-title">Simple Steering</span>
        <button type="button" class="right-panel-close" id="treatment-panel-close" aria-label="Close">×</button>
      </div>
      <div class="right-panel-body">
        <div class="treatment-editor">
          <div class="treatment-editor-row">
            <div class="treatment-editor-field">
              <label for="treatment-residual-var" class="treatment-label">Residual variable</label>
              <select id="treatment-residual-var" class="sidebar-select">
                <option value="">— Select saved residual —</option>
              </select>
            </div>
            <div class="treatment-editor-field treatment-editor-alpha">
              <label for="treatment-alpha" class="treatment-label">Alpha (strength)</label>
              <input
                type="number"
                id="treatment-alpha"
                class="sidebar-input"
                value="1.0"
                step="0.1"
              />
            </div>
            <div class="treatment-editor-field treatment-editor-normalize">
              <label class="treatment-label">Normalization</label>
              <label class="treatment-normalize-check">
                <input type="checkbox" id="treatment-normalize" checked />
                <span>Preserve residual norm (recommended)</span>
              </label>
            </div>
          </div>

          <div class="treatment-layer-grid-wrap">
            <div class="treatment-layer-grid-header">
              <div class="treatment-grid-title">Layer positions</div>
              <div class="treatment-grid-hint">Drag to select multiple positions</div>
            </div>
            <div class="treatment-layer-grid" id="treatment-layer-grid"></div>
          </div>

          <div class="treatment-editor-actions">
            <button type="button" class="btn-secondary" id="btn-treatment-clear">
              Clear
            </button>
            <button type="button" class="btn-primary" id="btn-treatment-apply">
              Apply Steering
            </button>
          </div>
        </div>
      </div>
    </aside>
  </div>
  <script>
    document.getElementById("treatment-panel-close").addEventListener("click", function() { window.close(); });
  </script>
</body>
</html>
